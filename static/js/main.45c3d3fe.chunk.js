(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{136:function(e){e.exports=JSON.parse('{"apiEndpoint":"https://blog-884c7-default-rtdb.europe-west1.firebasedatabase.app/","isFirebase":true}')},246:function(e,t,n){},371:function(e,t,n){},398:function(e,t,n){},399:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),i=n.n(c),o=(n(246),n(25)),s=n(17),l=n.n(s),u=n(24),d=n(8),j=n(121),b=n.n(j),m=n(40),p="jwt-token",f="jwt-refresh-token",h="jwt-expires",x="user-local-id",O="user-stay-on",g="email-user";function v(){return localStorage.getItem(f)}function k(){return localStorage.getItem(h)}function w(){return localStorage.getItem(O)}function y(){localStorage.removeItem(x),localStorage.removeItem(p),localStorage.removeItem(f),localStorage.removeItem(h),localStorage.removeItem(O),localStorage.removeItem(g)}function A(e){console.log("Run checkLogin");var t=k(),n=v(),a=w();t&&n&&"false"!==a?(console.log("CheckLogin val1"),e(!0)):n&&Number(t)>Date.now()?(console.log("CheckLogin val2",Number(t),Date.now()),e(!0)):(console.log("CheckLogin val4"),console.log("set false"),e(!1),y())}var C={setTokens:function(e,t){var n=e.refreshToken,a=e.idToken,r=e.localId,c=e.email,i=e.stayOn,o=void 0!==i&&i,s=e.expiresIn,l=void 0===s?3600:s,u=(new Date).getTime()+1e3*l;localStorage.setItem(x,r),localStorage.setItem(p,a),localStorage.setItem(f,n),localStorage.setItem(h,u),localStorage.setItem(O,o),localStorage.setItem(g,c),t&&A(t)},getAccessToken:function(){return localStorage.getItem(p)},getRefreshToken:v,getExpiresToken:k,getUserId:function(){return localStorage.getItem(x)},getStayOn:w,removeAuthData:y,checkLogin:A,getEmailUser:function(){return localStorage.getItem(g)}},S=n(1),N=b.a.create({baseURL:"https://identitytoolkit.googleapis.com/v1/",params:{key:"AIzaSyDhswkci1mDZtsaKYnLSC4WNqR9H1kVXoc"}}),I=r.a.createContext(),D=function(){return Object(a.useContext)(I)},T=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(d.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(!1),j=Object(d.a)(s,2),b=j[0],p=j[1],f=Object(a.useState)(C.getEmailUser()||null),h=Object(d.a)(f,2),x=h[0],O=h[1],g=Object(o.g)(),v=Object(o.f)();function k(){return(k=Object(u.a)(l.a.mark((function e(t){var n,a,r,c,i,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.prev=1,e.next=4,N.post("accounts:signUp",{email:n,password:a,returnSecureToken:!0});case 4:r=e.sent,c=r.data,console.log(c),v.push("/auth/login"),e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(1),y(e.t0),i=e.t0.response.data.error,o=i.code,s=i.message,400!==o){e.next=18;break}if("EMAIL_EXISTS"!==s){e.next=18;break}throw console.log("!!!:",s),new Error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c Email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442");case 18:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function w(){return(w=Object(u.a)(l.a.mark((function e(t){var n,a,r,c,i,o,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,r=t.stayOn,e.prev=1,e.next=4,N.post("accounts:signInWithPassword",{email:n,password:a,returnSecureToken:!0});case 4:c=e.sent,(i=c.data).stayOn=r,console.log(i),C.setTokens(i,p),O(C.getEmailUser()),v.push("/"),e.next=25;break;case 13:if(e.prev=13,e.t0=e.catch(1),y(e.t0),o=e.t0.response.data.error,s=o.code,u=o.message,400!==s){e.next=25;break}console.log(u),e.t1=u,e.next="INVALID_PASSWORD"===e.t1?22:"EMAIL_NOT_FOUND"===e.t1?23:24;break;case 22:throw new Error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 Email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!");case 23:throw new Error("\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0439 Email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d!");case 24:throw new Error("\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043f\u043e\u043f\u044b\u0442\u043e\u043a \u0432\u0445\u043e\u0434\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435!");case 25:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function y(e){var t=e.response.data.message;i(t)}return Object(a.useEffect)((function(){var e=g.pathname||"";"/articles"!==e&&"/admin"!==e||C.checkLogin(p)}),[g.pathname]),Object(a.useEffect)((function(){C.checkLogin(p)}),[]),Object(a.useEffect)((function(){null!==c&&(Object(m.b)(c),i(null))}),[c]),Object(S.jsx)(I.Provider,{value:{signUp:function(e){return k.apply(this,arguments)},signIn:function(e){return w.apply(this,arguments)},isAuth:b,setAuth:p,logout:function(){p(!1),C.removeAuthData(),O(null),v.push(g.pathname)},currentUser:x},children:t})},B=n(31),E=n(461),F=n(463),R=n(464),L=n(487),U=n(497),W=n(470),q=n(471),z=n(208),P=n.n(z),V=n(459),M=n(460),Q=n(153),K=n.n(Q),_=n(209),H=n.n(_),G=Object(V.a)((function(e){return{rootNav:{width:"100%"},menuButton:{flexGrow:0},menuList:{"& a.active":{fontWeight:"bold",textDecoration:"underline"},display:"flex",flexGrow:1},title:{flexGrow:1},userInfoBlock:{display:"flex",flexDirection:"column",alignItems:"center"},userInfo:{fontStyle:"italic"}}})),J=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],c=D(),i=c.isAuth,s=c.logout,l=c.currentUser;console.log(l);var u=G(),j=Object(o.f)(),b=Object(M.a)("(max-width:768px)"),m=Boolean(n),p=function(e){j.push(e),r(null)};return Object(S.jsx)(E.a,{position:"static",className:u.rootNav,children:Object(S.jsxs)(F.a,{children:[Object(S.jsx)(R.a,{variant:"h6",className:u.title,children:"\u0411\u043b\u043e\u0433Frontend"}),Object(S.jsxs)(L.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},open:m,onClose:function(){return r(null)},children:[Object(S.jsx)(U.a,{onClick:function(){return p("/")},children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(S.jsx)(U.a,{onClick:function(){return p("/articles")},children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u0430\u0442\u0435\u0439"}),Object(S.jsx)(U.a,{onClick:function(){return p("/admin")},children:"Root\u0414\u043e\u0441\u0442\u0443\u043f"}),i?Object(S.jsxs)(U.a,{onClick:s,children:[Object(S.jsx)(K.a,{fontSize:"inherit"})," \u0412\u044b\u0445\u043e\u0434"]}):Object(S.jsxs)("div",{children:[Object(S.jsx)(U.a,{onClick:function(){return p("/auth/login")},children:"\u0412\u0445\u043e\u0434"}),Object(S.jsx)(U.a,{onClick:function(){return p("/auth/register")},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]}),b?Object(S.jsx)(W.a,{edge:"start",className:u.menuButton,color:"inherit","area-label":"menu",onClick:function(e){r(e.currentTarget)},children:Object(S.jsx)(P.a,{})}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{className:u.menuList,children:[Object(S.jsx)(U.a,{exact:!0,to:"/",component:B.b,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(S.jsx)(U.a,{to:"/articles",component:B.b,children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u0430\u0442\u0435\u0439"}),Object(S.jsx)(U.a,{to:"/admin",component:B.b,children:"Root\u0414\u043e\u0441\u0442\u0443\u043f"})]}),i?Object(S.jsxs)("div",{className:u.userInfoBlock,children:[Object(S.jsx)("div",{className:u.userInfo,children:l}),Object(S.jsxs)(q.a,{size:"small",color:"inherit",onClick:s,children:[Object(S.jsx)(K.a,{fontSize:"inherit"})," \u0412\u044b\u0445\u043e\u0434"]})]}):Object(S.jsxs)(q.a,{color:"inherit",onClick:function(){return p("/auth/login")},children:[Object(S.jsx)(H.a,{fontSize:"inherit"}),"Login"]})]})]})})},Y=n(4),X=n(34),Z=n(20),$=n(71),ee=n(501),te=n(495),ne=n(498),ae=n(502),re=n(504),ce=n(486),ie=n(474),oe=n(475),se=n(494),le=Object(V.a)((function(e){return{root:{marginBottom:e.spacing(1)},errText:{color:"#eb4242"}}})),ue=function(e){var t=e.label,n=e.type,r=e.name,c=e.value,i=e.onChange,o=e.error,s=Object($.a)(e,["label","type","name","value","onChange","error"]),l=Object(a.useState)(!1),u=Object(d.a)(l,2),j=u[0],b=u[1],m=le(),p=function(e){var t=e.target;i({name:t.name,value:t.value})};return Object(S.jsx)(S.Fragment,{children:"password"===n?Object(S.jsxs)(ee.a,{sx:{m:1,width:"25ch"},variant:"outlined",children:[Object(S.jsx)(te.a,{htmlFor:"outlined-adornment-password",children:"Password"}),Object(S.jsx)(ne.a,{error:!!o,id:r,className:m.root,type:j?"text":n,name:r,value:c,onChange:p,endAdornment:Object(S.jsx)(ae.a,{position:"end",children:Object(S.jsx)(re.a,{"aria-label":"toggle password visibility",onClick:function(){b((function(e){return!e}))},onMouseDown:function(e){e.preventDefault()},edge:"end",children:j?Object(S.jsx)(ie.a,{}):Object(S.jsx)(oe.a,{})})}),label:"Password"}),Object(S.jsx)(se.a,{className:m.errText,children:o})]}):Object(S.jsx)(ce.a,Object(Z.a)({label:t,error:!!o,type:j?"text":n,id:r,className:m.root,name:r,value:c,onChange:p,helperText:o},s))})},de=n(491),je=function(e){var t=e.name,n=e.value,a=e.onChange,r=e.children,c=e.error,i=Object($.a)(e,["name","value","onChange","children","error"]);return Object(S.jsxs)("div",{className:"form-check",children:[Object(S.jsx)(de.a,Object(Z.a)({type:"checkbox",value:"",onChange:function(){a({name:t,value:!n})},id:t,checked:n},i)),Object(S.jsx)("label",{className:"form-check-label",htmlFor:"flexCheckDefault",children:r}),c&&Object(S.jsx)("div",{className:"invalid-feedback",children:c})]})},be=n(499),me=n(503),pe=Object(V.a)((function(e){return{root:{"& > :not(style)":{m:"auto",width:"100%"},display:"flex",flexDirection:"column"},divActions:{width:"100%",display:"flex",justifyContent:"space-evenly",marginTop:e.spacing(2),marginBottom:e.spacing(2)},enterCls:{color:"red"}}})),fe=function(e){var t=e.handleSubmit,n=e.isValid,a=e.enterErrors,r=e.children,c=Object(o.f)(),i=pe();return Object(S.jsxs)("form",{component:"form",className:i.root,noValidate:!0,autoComplete:"off",onSubmit:t,children:[r,Object(S.jsxs)("div",{className:i.divActions,children:[Object(S.jsx)(be.a,{type:"submit",disabled:!n||!!a,variant:"outlined",children:"\u0412\u043e\u0439\u0442\u0438"}),a&&Object(S.jsx)(me.a,{className:i.enterCls,variant:"body2",gutterBottom:!0,children:a}),Object(S.jsx)(be.a,{variant:"outlined",onClick:function(){c.push("/")},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})},he=function(e,t){console.log(t),e((function(e){return Object(Z.a)(Object(Z.a)({},e),{},Object(Y.a)({},t.name,t.value))}))},xe=function(e){if("Tab"===e.code){e.preventDefault();var t=e.target.form;t[Array.prototype.indexOf.call(t,e.target)+2].focus()}},Oe=(n(371),function(e){return Object(S.jsxs)("div",{className:"lds-roller",children:[Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{}),Object(S.jsx)("div",{})]})}),ge=function(){var e=Object(a.useState)({email:"",password:"",stayOn:!1}),t=Object(d.a)(e,2),n=t[0],r=t[1],c=D().signIn,i=Object(a.useState)({}),o=Object(d.a)(i,2),s=o[0],j=o[1],b=Object(a.useState)(null),m=Object(d.a)(b,2),p=m[0],f=m[1],h=Object(a.useState)(!1),x=Object(d.a)(h,2),O=x[0],g=x[1],v=X.a().shape({password:X.c().required("\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),email:X.c().required("Email \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f").email("Email \u0432\u0432\u0435\u0434\u0451\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e")}),k=function(){return v.validate(n).then((function(){return j({})})).catch((function(e){return j(Object(Y.a)({},e.path,e.message))})),0===Object.keys(s).length},w=0===Object.keys(s).length;Object(a.useEffect)((function(){f(null),k()}),[n]);var y=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(!0),t.preventDefault(),k()){e.next=5;break}return e.abrupt("return");case 5:return console.log(n),e.prev=6,g(!1),e.next=10,c(n);case 10:e.next=17;break;case 12:e.prev=12,e.t0=e.catch(6),g(!1),j({}),f(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:O?Object(S.jsx)("div",{className:"loader-container",children:Object(S.jsx)(Oe,{})}):Object(S.jsxs)(fe,{handleSubmit:y,isValid:w,enterErrors:p,children:[Object(S.jsx)(ue,{label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",name:"email",value:n.email,onChange:function(e){return he(r,e)},error:s.email,autoFocus:!0,onKeyDown:function(e){return xe(e)}}),Object(S.jsx)(ue,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password",value:n.password,onChange:function(e){return he(r,e)},error:s.password,className:"input-auth-form",onKeyDown:function(e){return xe(e)}}),Object(S.jsx)(je,{value:n.stayOn,onChange:function(e){return he(r,e)},name:"stayOn",onKeyDown:function(e){return xe(e)},children:"\u041e\u0441\u0442\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435"})]})})},ve=function(){var e=Object(a.useState)({email:"",password:"",confirmpassword:""}),t=Object(d.a)(e,2),n=t[0],r=t[1],c=D().signUp,i=Object(a.useState)({}),o=Object(d.a)(i,2),s=o[0],j=o[1],b=Object(a.useState)(null),m=Object(d.a)(b,2),p=m[0],f=m[1],h=Object(a.useState)(!1),x=Object(d.a)(h,2),O=x[0],g=x[1],v=X.a().shape({password:X.c().required("\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f").matches(/(?=.*[A-Z])/,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f\u0431\u044b 1 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0431\u0443\u043a\u0432\u0443").matches(/(?=.*[0-9])/,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f\u0431\u044b 1 \u0447\u0438\u0441\u043b\u043e").matches(/(?=.{8,})/,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0438\u0437 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),email:X.c().required("Email \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f").email("Email \u0432\u0432\u0435\u0434\u0451\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e")}),k=X.a().shape({confirmpassword:X.c().oneOf([X.b("password"),null],"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442")}),w=function(){return v.validate(n).then((function(){return j({})})).catch((function(e){return j(Object(Y.a)({},e.path,e.message))})),k.validate(n).then((function(){return j({})})).catch((function(e){return j(Object(Y.a)({},e.path,e.message))})),0===Object.keys(s).length},y=0===Object.keys(s).length;Object(a.useEffect)((function(){f(null),w()}),[n]);var A=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(!0),t.preventDefault(),w()){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,g(!1),e.next=9,c(n);case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(5),g(!1),j({}),f(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:O?Object(S.jsx)("div",{className:"loader-container",children:Object(S.jsx)(Oe,{})}):Object(S.jsxs)(fe,{handleSubmit:A,isValid:y,enterErrors:p,children:[Object(S.jsx)(ue,{label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",name:"email",value:n.email,onChange:function(e){return he(r,e)},error:s.email,className:"input-auth-form",autoFocus:!0,onKeyDown:function(e){return xe(e)}}),Object(S.jsx)(ue,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password",value:n.password,onChange:function(e){return he(r,e)},error:s.password,className:"input-auth-form",onKeyDown:function(e){return xe(e)}}),Object(S.jsx)(ue,{label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"confirmpassword",value:n.confirmpassword,onChange:function(e){return he(r,e)},error:s.confirmpassword,className:"input-auth-form",onKeyDown:function(e){return xe(e)}})]})})},ke=function(e){var t=e.children;return Object(S.jsx)("div",{style:{textAlign:"center",marginTop:10,marginBottom:15,color:"black"},children:Object(S.jsx)("h3",{children:t})})},we=n(488),ye=Object(V.a)((function(e){return{authBlock:{border:"2px solid #0012ff",borderRadius:"3px",padding:"10px 40px 40px 40px",margin:"20px auto",maxWidth:"550px"},linkAuth:{textDecoration:"none",color:"#0012ff"}}})),Ae=function(){var e=Object(o.h)().type,t=ye();return Object(S.jsx)(we.a,{className:t.authBlock,children:"register"===e?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ke,{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(S.jsx)(ve,{}),Object(S.jsx)(we.a,{sx:{textAlign:"center"},children:Object(S.jsx)(B.b,{to:"/auth/login",className:t.linkAuth,children:"\u0415\u0441\u0442\u044c \u043b\u043e\u0433\u0438\u043d?"})})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ke,{children:"\u0412\u0445\u043e\u0434"}),Object(S.jsx)(ge,{}),Object(S.jsx)(we.a,{sx:{textAlign:"center"},children:Object(S.jsx)(B.b,{to:"/auth/register",className:t.linkAuth,children:"\u041d\u0435\u0442 \u043b\u043e\u0433\u0438\u043d\u0430?"})})]})})},Ce=n(18),Se=n(479),Ne=n(480),Ie=n(481),De=n(482),Te=n(483),Be=n(36),Ee=n(136),Fe=b.a.create({baseURL:Ee.apiEndpoint});Fe.interceptors.request.use(function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r,c,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ee.isFirebase){e.next=13;break}if(n=/\/$/gi.test(t.url),t.url=(n?t.url.slice(0,-1):t.url)+".json",a=C.getExpiresToken(),!((r=C.getRefreshToken())&&a<Date.now())){e.next=11;break}return e.next=8,N.post("token",{grant_type:"refresh_token",refresh_token:r});case 8:c=e.sent,i=c.data,C.setTokens({refreshToken:i.refresh_token,idToken:i.id_token,expiresIn:i.expires_in,localId:i.user_id});case 11:(o=C.getAccessToken())&&(t.params=Object(Z.a)(Object(Z.a)({},t.params),{},{auth:o}));case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),Fe.interceptors.response.use((function(e){var t;return Ee.isFirebase&&(e.data={content:(t=e.data,t&&!t.id?Object.keys(t).map((function(e){return Object(Z.a)({},t[e])})):t)}),e}),(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.log(e),m.b.error("Something was wrong. Try it later.")),Promise.reject(e)}));var Re={get:Fe.get,post:Fe.post,put:Fe.put,delete:Fe.delete},Le={get:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.get("articles/");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Ue=Object(Be.c)({name:"articles",initialState:{entities:null,isLoading:!0,error:null,lastFetch:null,currentArticle:null,isModal:!1,foundArticles:null,page:1},reducers:{articlesRequested:function(e){e.isLoading=!0},articlesReceived:function(e,t){e.entities=t.payload,e.lastFetch=Date.now(),e.isLoading=!1},articleCreated:function(e,t){e.entities.push(t.payload.content)},articleUpdated:function(e,t){e.entities=e.entities.map((function(e){return e.id===t.payload.content.id?t.payload.content:e}))},articleDeleted:function(e,t){e.entities=e.entities.filter((function(e){return e.id!==t.payload}))},articlesRequestFiled:function(e,t){e.error=t.payload,e.isLoading=!1},currentArticleReceived:function(e,t){e.currentArticle=e.entities.filter((function(e){return Number(e.id)===Number(t.payload)}))},currentArticleReseted:function(e){e.currentArticle=null},regPageRequested:function(e){e.isLoading=!1},moduleOpened:function(e){e.isModal=!0},moduleClosed:function(e){e.isModal=!1,e.currentArticle=null},articlesFound:function(e,t){e.foundArticles=t.payload},articlesFoundCleared:function(e){e.foundArticles=null},pageSelected:function(e,t){e.page=t.payload},pageReseted:function(e){e.page=1}}}),We=Ue.reducer,qe=Ue.actions,ze=qe.articlesRequested,Pe=qe.articlesReceived,Ve=qe.articlesRequestFiled,Me=qe.currentArticleReceived,Qe=qe.currentArticleReseted,Ke=qe.articleCreated,_e=qe.articleUpdated,He=qe.regPageRequested,Ge=qe.moduleClosed,Je=qe.moduleOpened,Ye=qe.articleDeleted,Xe=qe.articlesFound,Ze=qe.articlesFoundCleared,$e=qe.pageSelected,et=qe.pageReseted,tt=Object(Be.b)("articles/deleteArticleFailed"),nt=Object(Be.b)("articles/createArticleRequested"),at=Object(Be.b)("articles/createArticleFailed"),rt=Object(Be.b)("articles/updateArticleRequested"),ct=Object(Be.b)("articles/updateArticleFailed");var it=function(){return function(e){e(Qe())}},ot=function(){return function(e){e(He())}},st=function(e){return function(t){t(Me(e))}},lt=function(){return function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n().articles.lastFetch,i=a,!(Date.now()-i>6e4)){e.next=15;break}return t(ze()),e.prev=3,e.next=6,Le.get();case 6:r=e.sent,c=r.content,t(Pe(c)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),t(Ve(e.t0.message)),Object(m.b)(e.t0.message);case 15:case"end":return e.stop()}var i}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()},ut=function(){return function(e){e(Ge())}},dt=function(){return function(e){e(Ze())}},jt=function(){return function(e){e(et())}},bt=We,mt=n(129),pt=function(e){var t=e.articles,n=Object(a.useState)(""),r=Object(d.a)(n,2),c=r[0],i=r[1],o=Object(Ce.b)(),s=function(e){i(e.value);var n=[];t.forEach((function(t){-1!==t.title.toLowerCase().indexOf(e.value.toLowerCase())&&n.push(t)})),o(function(e){return function(t){t(Xe(e))}}(n))};return Object(S.jsx)(ue,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438:",name:"searchArticle",value:c,onChange:function(e){return s(e)},placeholder:"\u041f\u043e\u0438\u0441\u043a..."})},ft=n(128),ht=n.n(ft);var xt=r.a.createContext(),Ot=function(){return Object(a.useContext)(xt)},gt=function(e){var t=e.children,n=Object(Ce.c)((function(e){return e.articles.entities})),r=Object(Ce.c)((function(e){return e.articles.foundArticles})),c=Object(Ce.b)(),i=Object(a.useState)({path:"date",order:"desc"}),o=Object(d.a)(i,2),s=o[0],l=o[1],u=ht.a.orderBy(r||n,[s.path],[s.order]),j=Math.ceil(u.length/6),b=Object(Ce.c)((function(e){return e.articles.page})),m=function(e,t,n){var a=(t-1)*n;return e.slice(a,n+a)}(u,b,6);return Object(S.jsx)(xt.Provider,{value:{articles:n,articlesPaginate:m,sortBy:s,handleSort:function(e){l(e)},count:j,handleChange:function(e,t){c(function(e){return function(t){t($e(e))}}(t))},page:b},children:t})},vt=n(489),kt=function(){var e=Object(Ce.b)(),t=Object(o.f)(),n=Ot(),a=n.articles,r=n.articlesPaginate,c=n.count,i=n.handleChange,s=n.page;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(we.a,{sx:{marginTop:"10px",marginBottom:"15px"},children:Object(S.jsx)(pt,{articles:a})}),Object(S.jsx)(Se.a,{container:!0,spacing:4,children:r.map((function(n){return Object(S.jsx)(Se.a,{item:!0,xs:12,md:4,children:Object(S.jsxs)(Ne.a,{sx:{height:"100%"},children:[Object(S.jsx)(Ie.a,{component:"img",height:"150px",image:n.img,alt:""}),Object(S.jsxs)(De.a,{sx:{p:0},children:[Object(S.jsx)(R.a,{gutterBottom:!0,variant:"h5",component:"div",children:n.title}),Object(S.jsxs)(R.a,{variant:"body2",children:[Object(S.jsx)(mt.a,{content:n.article.slice(0,59)}),"..."]})]}),Object(S.jsx)(Te.a,{children:Object(S.jsx)(q.a,{size:"small",color:"primary",onClick:function(){return a=n.id,t.push("/articles/".concat(a)),void e(st(a));var a},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"})})]})},n.id)}))}),Object(S.jsx)(we.a,{sx:{marginTop:"15px",display:"flex",justifyContent:"center"},children:Object(S.jsx)(vt.a,{count:c,page:s,onChange:i})})]})},wt={get:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.get("comments/");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},yt=Object(Be.c)({name:"comments",initialState:{entities:null,isLoading:!0,error:null},reducers:{commentsRequested:function(e){e.isLoading=!0},commentsReceived:function(e,t){e.entities=t.payload,e.isLoading=!1},commentsCreated:function(e,t){e.entities.push(t.payload.content)},commentDeleted:function(e,t){e.entities=e.entities.filter((function(e){return e.id!==t.payload}))},commentsRequestFiled:function(e,t){e.error=t.payload,e.isLoading=!1}}}),At=yt.reducer,Ct=yt.actions,St=Ct.commentsRequested,Nt=Ct.commentsReceived,It=Ct.commentsRequestFiled,Dt=Ct.commentsCreated,Tt=Ct.commentDeleted,Bt=Object(Be.b)("comments/createCommentRequested"),Et=Object(Be.b)("comments/createCommentFailed"),Ft=Object(Be.b)("comments/deleteCommentFailed"),Rt=function(){return function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(St()),e.prev=1,e.next=4,wt.get();case 4:a=e.sent,r=a.content,t(Nt(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t(It(e.t0.message)),Object(m.b)(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()},Lt=At;var Ut=Object(V.a)((function(e){return{taAddArticle:{background:"transparent",border:"1px solid rgb(90, 89, 89)",width:"100%",padding:"10px",fontSize:"17px",outline:"none",fontFamily:"inherit",marginTop:e.spacing(2)},errText:{color:"#eb4242"}}})),Wt=function(e){var t=e.label,n=e.name,a=(e.className,e.value),r=e.onChange,c=e.error,i=Object($.a)(e,["label","name","className","value","onChange","error"]),o=Ut();return Object(S.jsxs)(we.a,{sx:{margin:"10px 0"},children:[Object(S.jsxs)("label",{htmlFor:n,children:[" ",t]}),Object(S.jsx)(we.a,Object(Z.a)(Object(Z.a)({component:"textarea",id:n,name:n,value:a,onChange:function(e){var t=e.target;r({name:t.name,value:t.value})},className:o.taAddArticle},i),{},{rows:"5"})),c&&Object(S.jsx)(we.a,{className:o.errText,component:"div",children:c})]})},qt=n(214),zt=n.n(qt),Pt=Object(V.a)((function(e){return{root:{"& > :not(style)":{m:"auto",width:"100%"},display:"flex",flexDirection:"column"},divActions:{display:"flex",justifyContent:"center",padding:"10px"},errText:{color:"#eb4242"}}})),Vt=function(){var e=D().currentUser,t=Object(Ce.c)((function(e){return e.articles.currentArticle}))[0].id,n=Object(a.useState)({commentText:""}),r=Object(d.a)(n,2),c=r[0],i=r[1],o=Pt(),s=Object(a.useState)({}),j=Object(d.a)(s,2),b=j[0],p=j[1],f=Object(Ce.b)(),h=X.a().shape({commentText:X.c().required("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")});Object(a.useEffect)((function(){h.validate(c).then((function(){return p({})})).catch((function(e){return p(Object(Y.a)({},e.path,e.message))})),Object.keys(b).length}),[c]);var x=function(n){var a;n.preventDefault(),c.articleId=t,c.email=e,c.date=(new Date).toLocaleString(),c.id=Date.now(),f((a=c,function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Bt()),e.prev=1,e.next=4,Re.put("comments/".concat(a.id),a);case 4:n=e.sent,r=n.data,t(Dt(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t(Et(e.t0.message)),m.b.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())),i((function(e){return Object(Z.a)(Object(Z.a)({},e),{},{commentText:""})}))};return Object(S.jsxs)("form",{component:"form",className:o.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){return x(e)},children:[Object(S.jsx)(Wt,{label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439:",id:"commentText",type:"text",name:"commentText",value:c.commentText,error:b.commentText,onChange:function(e){return he(i,e)},placeholder:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435..."}),Object(S.jsx)("div",{className:o.divActions,children:Object(S.jsx)(be.a,{type:"submit",variant:"contained",endIcon:Object(S.jsx)(zt.a,{}),children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})})]})},Mt=n(506),Qt=n(485),Kt=n(130),_t=n.n(Kt),Ht=Object(V.a)((function(e){return{blockComments:{marginTop:e.spacing(2),textAlign:"center",padding:"10px","& li":{listStyleType:"none",marginTop:e.spacing(2),textAlign:"left",padding:"5px"}},liBlock:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},dateComments:{fontSize:"12px",color:"grey"},emailComments:{fontSize:"16px"},textComments:{marginTop:e.spacing(1),fontStyle:"italic"},loginInvite:{marginTop:e.spacing(3)}}})),Gt=function(e){var t=e.blogID,n=function(e,t){var n=[];return e.forEach((function(e){Number(e.articleId)===Number(t)&&n.push(e)})),ht.a.orderBy(n,["date"],["desc"])}(Object(Ce.c)((function(e){return e.comments.entities})),t),a=D().currentUser,r=Ht(),c=Object(Ce.b)();return Object(S.jsxs)("div",{className:r.blockComments,children:[(null===n||void 0===n?void 0:n.length)>0?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("p",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438:"}),Object(S.jsx)("ul",{children:n.map((function(e){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:r.liBlock,children:[Object(S.jsxs)("li",{children:[Object(S.jsxs)("p",{children:[Object(S.jsxs)("span",{className:r.dateComments,children:[e.date," "]}),Object(S.jsxs)("span",{className:r.emailComments,children:[e.email,", \u043f\u0438\u0448\u0435\u0442: "]})]}),Object(S.jsx)("p",{className:r.textComments,children:e.commentText})]}),"adminblog@test.ru"===a&&Object(S.jsx)(Qt.a,{title:"Delete",children:Object(S.jsx)(re.a,{children:Object(S.jsx)(_t.a,{onClick:function(){return c((t=e.id,function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.delete("articles/"+t);case 3:n(Tt(t)),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),Ft(e.t0.message),m.b.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));var t}})})})]}),Object(S.jsx)(Mt.a,{})]},e.id)}))})]}):Object(S.jsx)("p",{children:"\u041d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432 \u043d\u0435\u0442"}),a?Object(S.jsx)(Vt,{}):Object(S.jsxs)("div",{className:r.loginInvite,children:["\u0427\u0442\u043e\u0431\u044b \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c ",Object(S.jsx)(B.b,{to:"/auth/login",children:"\u041b\u043e\u0433\u0438\u043d"})]})]})},Jt=Object(V.a)((function(e){var t,n;return{root:{display:"flex",flexDirection:"column",position:"relative"},currentArticleBody:(t={},Object(Y.a)(t,e.breakpoints.down("sm"),{padding:"15px",whiteSpace:"pre-wrap"}),Object(Y.a)(t,"padding","25px"),Object(Y.a)(t,"backgroundColor","rgb(103 103 235)"),Object(Y.a)(t,"boxShadow","2px 3px 25px rgb(49, 49, 77)"),Object(Y.a)(t,"color","#fff"),Object(Y.a)(t,"textIndent","1.5em"),t),imgBlock:(n={},Object(Y.a)(n,e.breakpoints.down("sm"),{float:"none",margin:"0px",marginBottom:"10px"}),Object(Y.a)(n,"maxWidth","300px"),Object(Y.a)(n,"maxHeight","150px"),Object(Y.a)(n,"overflow","hidden"),Object(Y.a)(n,"float","left"),Object(Y.a)(n,"marginTop","4px"),Object(Y.a)(n,"marginRight",e.spacing(2)),Object(Y.a)(n,"marginLeft","-20px"),n),img:{maxWidth:"100%"},btnBack:{marginTop:e.spacing(2),marginBottom:e.spacing(3)}}})),Yt=function(e){var t=e.blog,n=Jt(),a=Object(o.f)(),r=Object(Ce.b)();return Object(S.jsxs)("div",{className:n.root,children:[Object(S.jsx)(ke,{children:t[0].title}),Object(S.jsxs)("div",{className:n.currentArticleBody,children:[Object(S.jsx)("div",{className:n.imgBlock,children:Object(S.jsx)("img",{src:t[0].img,alt:"",className:n.img})}),Object(S.jsx)(R.a,{variant:"body1",gutterBottom:!0,children:Object(S.jsx)(mt.a,{content:t[0].article})})]}),Object(S.jsx)(Gt,{blogID:t[0].id}),Object(S.jsx)(q.a,{size:"medium",color:"primary",className:n.btnBack,onClick:function(){r(it()),a.push("/articles")},children:"\u041d\u0430\u0437\u0430\u0434"})]})},Xt=function(){var e=Object(Ce.c)((function(e){return e.articles.currentArticle}));return Object(S.jsx)("div",{className:"articles",children:(null===e||void 0===e?void 0:e.length)>0?Object(S.jsx)(Yt,{blog:e}):Object(S.jsx)(kt,{})})},Zt=n(215),$t=n.n(Zt),en=Object(V.a)((function(e){return{root:{marginTop:e.spacing(3),backgroundColor:"rgb(62, 63, 64)",padding:"45px 10px",width:"100%",textAlign:"center",color:"white"},footerText:{fontSize:"18px",color:"inherit"}}})),tn=function(){var e=en();return Object(S.jsx)("div",{className:e.root,children:Object(S.jsxs)("p",{className:e.footerText,children:["Copyright ",Object(S.jsx)($t.a,{sx:{fontSize:"15px"}})," \u0417\u0430\u043b\u0438\u043b\u043e\u0432 \u041a\u043e\u043d\u0441\u0442\u0430\u0442\u0438\u043d 2022"]})})},nn=n(507),an=n(508),rn=n(509),cn=Object(V.a)((function(e){return{sortHeader:{cursor:"pointer",transition:"all .2s ease-in-out","&:hover":{transition:"all .2s ease-in",transform:"scale(1.015)"}}}})),on=function(e){var t=e.onSort,n=e.selectedSort,a=e.columns,r=cn();return Object(S.jsx)(nn.a,{children:Object(S.jsx)(an.a,{children:Object.keys(a).map((function(e){return Object(S.jsxs)(rn.a,{onClick:a[e].path?function(){return r=a[e].path,void(n.path===r?t(Object(Z.a)(Object(Z.a)({},n),{},{order:"asc"===n.order?"desc":"asc"})):t({path:r,order:"asc"}));var r}:void 0,className:a[e].path&&r.sortHeader,children:[a[e].path===n.path&&"desc"===n.order&&Object(S.jsx)("div",{children:Object(S.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAQUlEQVQ4y2NgGAWDGdQDIUnK/wNhPSnKfwMhkVogysOBkCgtMOUgQIQWiPIwOD+MkJZ6FOUwLXjt0CJCZBQMAgAAPCQdv/lpbCcAAAAASUVORK5CYII=",alt:""})}),a[e].path===n.path&&"asc"===n.order&&Object(S.jsx)("div",{children:Object(S.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAARUlEQVQ4y2NgGAWDEWgRIYIE6hl+M4ShiIQBRerxafiPogWk/D8+DTAt4WB2OGHlyFqIVI7QQrRymBYSlEO01I+mscEMAFgWHb8VkC3OAAAAAElFTkSuQmCC",alt:""})}),a[e].name]},e)}))})})},sn=n(510),ln=n(216),un=n.n(ln),dn=Object(V.a)((function(e){return{tdStyle:{cursor:"pointer",transform:"scaleX(1)","&:hover":{transition:"all .4s ease-in-out",transform:"scaleX(1.05)"}}}})),jn=function(e){var t=e.data,n=e.columns,a=e.onDelete,r=e.onEdit,c=dn();return Object(S.jsx)(sn.a,{children:t.map((function(e){return Object(S.jsx)(an.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:Object.keys(n).map((function(t,n){return"edit"===t?Object(S.jsx)(rn.a,{className:c.tdStyle,onClick:function(){return r(e.id)},children:Object(S.jsx)(Qt.a,{title:"Edit",children:Object(S.jsx)(re.a,{children:Object(S.jsx)(un.a,{})})})},n):"delete"===t?Object(S.jsx)(rn.a,{onClick:function(){return a(e.id)},children:Object(S.jsx)(Qt.a,{title:"Delete",children:Object(S.jsx)(re.a,{children:Object(S.jsx)(_t.a,{})})})},n):Object(S.jsx)(rn.a,{children:e[t]},n)}))},e.id)}))})},bn={date:{path:"date",name:"\u0414\u0430\u0442\u0430"},title:{path:"title",name:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"},edit:{path:"",name:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"},delete:{path:"",name:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}},mn=Object(V.a)((function(e){return{customFileUpload:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",marginBottom:e.spacing(4),border:"1px solid #ccc",padding:"10px 12px"},imgBlock:{maxWidth:"300px",maxHeight:"150px",overflow:"hidden",marginBottom:e.spacing(1)},img:{maxWidth:"100%"},file:{opacity:"0",width:"0.1px",height:"0.1px",position:"absolute"},fileInput:{display:"flex",justifyContent:"center",alignItems:"center"},fileInputLabel:{position:"relative",width:"190px",height:"50px",borderRadius:"10px",background:"#ccc",border:"1px solid rgb(63, 62, 62)",display:"flex",alignItems:"center",justifyContent:"center",color:"#000",fontSize:"15px",fontFamily:"inherit",cursor:"pointer",transition:"transform .2s ease-out",marginRight:"10px","&:hover":{transition:"all .2s ease-out",boxShadow:"0 4px 7px rgba(0, 0, 0, 0.4)"}}}})),pn=function(e){var t=e.article,n=e.fileUploadInputChange,a=e.uploadName,r=e.dataUri,c=mn();return Object(S.jsxs)("div",{className:c.customFileUpload,children:[(null===t||void 0===t?void 0:t.img)&&!r?Object(S.jsx)("div",{className:c.imgBlock,children:Object(S.jsx)("img",{src:t.img,alt:"",className:c.img})}):Object(S.jsx)("div",{className:c.imgBlock,children:Object(S.jsx)("img",{src:r,alt:"",className:c.img})}),Object(S.jsxs)("div",{className:c.fileInput,children:[Object(S.jsx)("input",{type:"file",id:"file",className:c.file,onChange:function(e){return n(e)}}),Object(S.jsx)("label",{htmlFor:"file",className:c.fileInputLabel,children:"Select file"}),Object(S.jsx)("p",{children:a})]})]})},fn=n(218),hn=n.n(fn),xn=n(217),On=n.n(xn),gn=(n(396),Object(V.a)((function(e){return{root:{"& > :not(style)":{m:"auto",width:"100%"},display:"flex",flexDirection:"column"},divActions:{display:"flex",justifyContent:"space-between",padding:"10px"},errArticle:{color:"#eb4242",textAlign:"center"},errText:{color:"#eb4242"}}}))),vn=function(e){var t=e.article,n=e.onCloseModal,r=e.handleSnackbar,c=Object(a.useState)({title:t?t[0].title:"",img:t?t[0].img:"",id:t?t[0].id:Date.now()}),i=Object(d.a)(c,2),o=i[0],s=i[1],j=Object(a.useState)(t?t[0].article:""),b=Object(d.a)(j,2),p=b[0],f=b[1],h=gn(),x=Object(a.useState)((null===t||void 0===t?void 0:t.img)||""),O=Object(d.a)(x,2),g=O[0],v=O[1],k=Object(a.useState)({}),w=Object(d.a)(k,2),y=w[0],A=w[1],C=Object(a.useState)(""),N=Object(d.a)(C,2),I=N[0],D=N[1],T=Object(Ce.b)(),B=t;Object(a.useEffect)((function(){A((function(e){return Object(Z.a)(Object(Z.a)({},e),{},{article:null})})),R()}),[p]);var E=function(e){27===e.keyCode&&n()};Object(a.useEffect)((function(){return window.addEventListener("keydown",E),function(){window.removeEventListener("keydown",E)}}));var F=X.a().shape({title:X.c().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438")}),R=function(){return F.validate(o).then((function(){return A({})})).catch((function(e){return A(Object(Y.a)({},e.path,e.message))})),0===Object.keys(y).length},L=0===Object.keys(y).length;Object(a.useEffect)((function(){R()}),[o]);var U=function(e){if(e.preventDefault(),g&&(o.img=g),o.date=(new Date).toLocaleString(),o.article=p,p.length<=11)return A({article:"\u041d\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0441\u0442\u0430\u0442\u044c\u0438!"});T(null===B?function(e,t){return function(){var n=Object(u.a)(l.a.mark((function n(a){var r,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(nt()),n.prev=1,n.next=4,Re.put("articles/".concat(e.id),e);case 4:r=n.sent,c=r.data,a(Ge()),a(Ke(c)),t(),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),a(at(n.t0.message)),m.b.error(n.t0.message);case 15:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()}(o,r):function(e,t){return function(){var n=Object(u.a)(l.a.mark((function n(a){var r,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(rt()),n.prev=1,n.next=4,Re.put("articles/".concat(e.id),e);case 4:r=n.sent,c=r.data,a(Ge()),a(_e(c)),t(),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),a(ct(n.t0.message)),m.b.error(n.t0.message);case 15:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()}(o,r))};return Object(S.jsxs)("form",{component:"form",className:h.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){return U(e)},children:[Object(S.jsx)(ue,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438:",name:"title",value:o.title,onChange:function(e){return he(s,e)},error:y.title,autoFocus:!0,placeholder:"\u041d\u043e\u0432\u0430\u044f...",onKeyDown:function(e){return xe(e)}}),Object(S.jsx)(On.a,{theme:"snow",value:p,onChange:f,style:{minHeight:"250px",maxHeight:"400px",overflow:"auto",marginBottom:"10px"}}),y.article&&Object(S.jsx)("p",{className:h.errArticle,children:y.article}),Object(S.jsx)(pn,{article:t,fileUploadInputChange:function(e){D(e.target.value.split("\\")[2]);var t=new FileReader;t.onload=function(e){v(e.target.result)},t.readAsDataURL(e.target.files[0])},uploadName:I,dataUri:g}),Object(S.jsxs)("div",{className:h.divActions,children:[Object(S.jsx)(be.a,{type:"submit",disabled:!L,variant:"contained",endIcon:Object(S.jsx)(hn.a,{}),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(S.jsx)(be.a,{variant:"outlined",type:"button",onClick:n,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})},kn=n(490),wn=n(511),yn={modalWindow:{position:"absolute",top:"49%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"650px",width:"100%",bgcolor:"rgb(190, 190, 190)",boxShadow:24,p:"10px 30px 30px 30px"},blockActions:{display:"flex",justifyContent:"space-between",width:"100%",marginTop:"30px"}},An=function(e){var t=e.handleSnackbar,n=Object(Ce.c)((function(e){return e.articles.currentArticle})),a=Object(Ce.c)((function(e){return e.articles.isModal})),r=Object(Ce.b)();return Object(S.jsx)("div",{children:Object(S.jsx)(kn.a,{open:!!n||a,onClose:function(){return r(ut())},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(S.jsxs)(wn.a,{sx:yn.modalWindow,component:"div",children:[Object(S.jsx)(ke,{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(S.jsx)(vn,{article:n,onCloseModal:function(){return r(ut())},handleSnackbar:t})]})})})},Cn=n(493),Sn=n(219),Nn=n.n(Sn),In=n(512),Dn=n(505),Tn=n(513),Bn=Object(V.a)((function(e){return{rootAdmin:{width:"inherit",marginBottom:e.spacing(4)},blockActions:{display:"flex",justifyContent:"space-between",margin:"10px auto 10px",width:"100%"},table:{width:"100%"}}})),En=function(){var e=Ot(),t=e.articles,n=e.articlesPaginate,r=e.sortBy,c=e.handleSort,i=e.count,o=e.handleChange,s=e.page,j=Bn(),b=Object(a.useState)({open:!1,vertical:"bottom",horizontal:"left"}),p=Object(d.a)(b,2),f=p[0],h=p[1],x=Object(Ce.b)(),O=function(){h(Object(Z.a)(Object(Z.a)({},f),{},{open:!k}))},g=f.vertical,v=f.horizontal,k=f.open;return Object(S.jsxs)("div",{className:j.rootAdmin,children:[Object(S.jsxs)("div",{className:j.blockActions,component:"div",children:[Object(S.jsx)(be.a,{variant:"contained",endIcon:Object(S.jsx)(Nn.a,{}),onClick:function(){return x((function(e){e(Je())}))},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e"}),Object(S.jsx)(pt,{articles:t})]}),Object(S.jsx)(An,{handleSnackbar:O}),Object(S.jsx)(In.a,{component:Dn.a,sx:{marginBottom:"15px"},children:Object(S.jsxs)(Tn.a,{className:j.table,"aria-label":"simple table",children:[Object(S.jsx)(on,{onSort:c,selectedSort:r,columns:bn}),Object(S.jsx)(jn,{columns:bn,data:n,onDelete:function(e){return x(function(e,t){return function(){var n=Object(u.a)(l.a.mark((function n(a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Re.delete("articles/"+e);case 3:a(Ye(e)),t(),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),tt(n.t0.message),m.b.error(n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(e,O))},onEdit:function(e){return x((t=e,function(e){e(Je()),e(Me(t))}));var t}})]})}),Object(S.jsx)(wn.a,{sx:{display:"flex",justifyContent:"center"},children:Object(S.jsx)(vt.a,{count:i,page:s,onChange:o})}),Object(S.jsx)(Cn.a,{anchorOrigin:{vertical:g,horizontal:v},open:k,onClose:O,autoHideDuration:2500,message:"\u0413\u043e\u0442\u043e\u0432\u043e!"},g+v)]})},Fn=n.p+"static/media/react_wires.428f9943.png",Rn=n.p+"static/media/react_hooks.ed1fe157.png",Ln=n.p+"static/media/JavaScript.e05a9ec6.jpg",Un=(n.p,n.p,n.p,n.p,n.p,[{id:"67rdca3eeb7f6fgeed000001",img:Fn,text:"React \u2014 JavaScript-\u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0441 \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u043c \u043a\u043e\u0434\u043e\u043c \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432. React \u0440\u0430\u0437\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f Facebook, Instagram \u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e\u043c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u0438 \u043a\u043e\u0440\u043f\u043e\u0440\u0430\u0446\u0438\u0439."},{id:"67rdca3eeb7f6fgeed000002",img:Rn,text:"\u0425\u0443\u043a\u0438 \u2014 \u043d\u043e\u0432\u043e\u0432\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0432 React 16.8, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 React \u0431\u0435\u0437 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0441\u043e\u0432. \u0425\u0443\u043a\u0438 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 React \u0431\u0435\u0437 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0441\u043e\u0432\u044b\u0445 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432. "},{id:"67rdca3eeb7f6fgeed000003",img:Ln,text:"JavaScript \u044f\u0437\u044b\u043a \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u0430\u043c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442, \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043c\u0443\u043b\u044c\u0442\u0438\u043c\u0435\u0434\u0438\u0430, \u0430\u043d\u0438\u043c\u0438\u0440\u0443\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f. JavaScript \u2013 \u043e\u0434\u0438\u043d \u0438\u0437 \u0441\u0430\u043c\u044b\u0445 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0445 \u044f\u0437\u044b\u043a\u043e\u0432 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043c\u0438\u0440\u0435."}]),Wn=Object(Be.c)({name:"startInfo",initialState:{entities:null,isLoading:!1},reducers:{startInfoReceived:function(e,t){e.isLoading=!1,e.entities=t.payload}}}),qn=Wn.reducer,zn=Wn.actions.startInfoReceived,Pn=function(){return function(e){e(zn(Un))}},Vn=qn,Mn=Object(V.a)((function(e){return{title:{textAlign:"center"},blog:{backgroundColor:"#f2f5fd",padding:"20px",marginBottom:e.spacing(4),border:"1px solid #fff",borderRadius:"2px",boxShadow:"7px 9px 11px rgb(8, 8, 8)"},imgBlock:{maxWidth:"550px",margin:"0 auto",maxHeight:"300px",overflow:"hidden",p:2},img:{maxWidth:"100%"},text:{maxWidth:"550px",margin:"auto"}}})),Qn=function(){var e=Object(Ce.c)((function(e){return e.startInfo.entities})),t=Mn();return Object(S.jsxs)("div",{children:[Object(S.jsx)(ke,{children:"\u041e Frontend'\u0435..."}),null===e||void 0===e?void 0:e.map((function(e){return Object(S.jsxs)("div",{className:t.blog,children:[Object(S.jsx)("div",{className:t.imgBlock,children:Object(S.jsx)("img",{className:t.img,src:e.img,alt:""})}),Object(S.jsx)(R.a,{variant:"h6",gutterBottom:!0,component:"div",className:t.title,children:e.text.split(" ")[0]}),Object(S.jsx)(R.a,{variant:"subtitle1",gutterBottom:!0,component:"div",className:t.text,children:e.text})]},e.img)}))]})},Kn=function(e){var t=e.auth,n=e.currentUser,a=e.component,r=Object($.a)(e,["auth","currentUser","component"]);return Object(S.jsx)(o.b,Object(Z.a)(Object(Z.a)({},r),{},{render:function(e){return t&&"adminblog@test.ru"===n?Object(S.jsx)(a,Object(Z.a)({},e)):t&&"adminblog@test.ru"===n?void 0:Object(S.jsx)(o.a,{to:"/auth/login"})}}))},_n=function(e){var t=e.children,n=Object(Ce.c)((function(e){return e.articles.isLoading})),r=Object(Ce.b)(),c=Object(o.f)();function i(){return s.apply(this,arguments)}function s(){return(s=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/articles"!==location.pathname&&"/admin"!==location.pathname){e.next=10;break}return r(it()),r(dt()),r(jt()),e.next=6,r(lt());case 6:return e.next=8,r(Rt());case 8:e.next=20;break;case 10:if(-1===location.pathname.indexOf("/articles/")){e.next=19;break}return t=location.pathname.split("/"),e.next=14,r(lt());case 14:return e.next=16,r(Rt());case 16:r(st(t[2])),e.next=20;break;case 19:"/"===location.pathname?r(Pn()):"/auth/login"===location.pathname?(r(ot()),c.push("/auth/login")):"/auth/register"===location.pathname&&(c.push("/auth/register"),r(ot()));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){i()}),[]),Object(a.useEffect)((function(){i()}),[location.pathname]),"/"===location.pathname?t:n?Object(S.jsx)("div",{className:"loader-container",children:Object(S.jsx)(Oe,{})}):t},Hn=(n(397),n(398),n(484)),Gn=Object(V.a)((function(e){return{root:{maxWidth:"md",minHeight:"calc(100vh - 100px)"}}}));var Jn=function(){var e=D(),t=e.isAuth,n=e.currentUser,a=Gn();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(_n,{children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(J,{}),Object(S.jsxs)(Hn.a,{className:a.root,children:[Object(S.jsx)(o.b,{exact:!0,path:"/",component:Qn}),Object(S.jsxs)(gt,{children:[Object(S.jsx)(o.b,{path:"/articles/:articleId?",component:Xt}),Object(S.jsx)(Kn,{path:"/admin",component:En,auth:t,currentUser:n})]}),Object(S.jsx)(o.b,{path:"/auth/:type?",component:Ae})]}),Object(S.jsx)(tn,{})]})}),Object(S.jsx)(m.a,{})]})},Yn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,515)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},Xn=n(54),Zn=Object(Xn.b)({articles:bt,startInfo:Vn,comments:Lt});var $n=Object(Be.a)({reducer:Zn});i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(Ce.a,{store:$n,children:Object(S.jsx)(B.a,{children:Object(S.jsx)(T,{children:Object(S.jsx)(Jn,{})})})})}),document.getElementById("root")),Yn()}},[[399,1,2]]]);
//# sourceMappingURL=main.45c3d3fe.chunk.js.map